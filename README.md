# AI Powered Weather Monitoring ğŸŒ¤ï¸ğŸ¤–

## Overview ğŸ“Š
This repository contains the implementation of an AI-powered weather monitoring system using Raspberry Pi Pico W. It includes real-time data sensing, processing, and visualization pipelines, integrating IoT and AI/ML for advanced analytics and anomaly detection. ğŸŒğŸ“¡


---

## Pipeline ğŸ› ï¸ğŸ”„

<div align="center">
  <img src="images/weather_monitor_flow.svg" alt="Weather Monitoring Flow" height="400">
  <p><i>Figure 1: Weather Monitoring System Pipeline</i></p>
</div>

---

## Circuit Diagram ğŸ“¡ğŸ”Œ
<div align="center">
  <img src="images/circuit_diagram1.jpg" alt="Circuit Diagram" height="auto" width="70%">
  <p><i>Figure 2: Circuit Diagram for the AI-Powered Weather Monitoring System.</i></p>
</div>
<div align="center">
  <img src="Pin Configurateion/dht22_and_bmp280_pin_configuration.png" alt="Circuit Diagram 2" width="70%">
  <p><i>Figure 3: Pin Configuration of AI-Powered Weather Monitoring System. </i></p>
</div>

---


## ğŸ¬ YouTube Video Demo

<div align="center">
  <a href="https://youtu.be/hyS4sfDcfvg?si=e11aTrE80sh_ykmr">
    <img src="https://img.youtube.com/vi/hyS4sfDcfvg/0.jpg" alt="AI-Powered Weather Monitoring" width="600">
  </a>
  <p><I>Click on the thumbnails or https://youtu.be/hyS4sfDcfvg?si=e11aTrE80sh_ykmr to watch the AI Powered Weather Monitoring demo on YouTube. </i></p>
</div>

---

## How to Use This Repository ğŸ› ï¸ğŸ“–

### Prerequisites ğŸ“
Before using this repository, you should be familiar with:
- Reading sensor data with Raspberry Pi Pico W ğŸ§‘â€ğŸ’»
- Setting up Wi-Fi, HiveMQ, Node-RED, InfluxDB, Grafana, and Google Colab ğŸŒ
- Implementing AI/ML models like SVM, Random Forest, and K-Means Clustering ğŸ§ 

If you are new to any of these, [Follow this link](https://github.com/Abu-Taher-web/Internet_of_Things_all_Exercise_code) for step-by-step exercises. You can learn these concepts in approximately two days. â³



### Instructions ğŸ“œ

#### 1. Setting Up Raspberry Pi Pico W ğŸ–¥ï¸
1. **Download Thonny**: Install the Thonny IDE from Thonny's website.
2. **Connect Pico W**:
   - Press and hold the BOOTSEL button on your Pico W.
   - Connect it to your computer while keeping the button pressed.
   - Your Pico W should appear as USB storage. ğŸ’¾
3. **Install Firmware**:
   - Download this repository to your PC.
   - Navigate to the `Firmware` directory and locate `RPI_PICO_W-20231005-v1.21.0.uf2`.
   - Copy and paste it onto your Pico W.
   - Disconnect and reconnect your Pico W. ğŸ”„
4. **Setup Thonny**:
   - Restart Thonny. If connected properly, the console should display the help() message. âœ…

#### 2. Deploying Code ğŸ“‚
1. Navigate to the `Code for Pico W` folder.
2. Open each `.py` file in Thonny.
3. Save each file directly to your Pico W by selecting **File > Save As** and choosing the Pico W device. ğŸ’»

#### 3. Running HiveMQ ğŸŒ
1. Locate the `hivemq_v3.py` file.
2. Run the file in Thonny.
3. The console will display real-time sensor data. ğŸ“ˆ
<div align="center">
  <img src="images/console_data.png" alt="Console Data" height="400">
  <p><i>Figure 4: Console Data From Thonny</i></p>
</div>

#### 4. Visualizing Data ğŸ“Š

1. **HiveMQ**: Log in to your HiveMQ dashboard to verify incoming data.
   - **Security**: Utilized SSL/TLS protocols to encrypt data ğŸ”.
   - **Incoming Data**: HiveMQ dashboard displaying data in real-time. ğŸ•¹ï¸
<div align="center">
  <img src="images/hivemq.png" alt="HiveMQ" height="400">
  <p><i>Figure 5: HiveMQ Messages</i></p>
</div>

2. **Node-RED**: Check the debug window for data in JSON format. ğŸ“¡
<div align="center">
  <img src="images/node-red.png" alt="Node-RED" height="400">
  <p><i>Figure 6: Node-RED Flows</i></p>
</div>

6. **InfluxDB**: View incoming data in the InfluxDB instance. ğŸ“Š
<div align="center">
  <img src="images/influxdb.png" alt="InfluxDB" height="400">
  <p><i>Figure 7: InfluxDB Time Series Database</i></p>
</div>

7. **Grafana**:
   - Configure the dashboard using queries generated by InfluxDB.
   - Set up email alerts for abnormal conditions. ğŸ“©
<div align="center">
  <img src="images/grafana.png" alt="Grafana Dashboard" height="400">
  <p><i>Figure 8: Grafana Dashboard</i></p>
</div>

#### 5. Running the AI Model ğŸ¤–
1. Navigate to the `Code For Colab` folder.
2. Upload the model and `.ipynb` file to Google Colab.
3. Provide your credentials and run the notebook. ğŸ§‘â€ğŸ’»
4. The Random Forest model will classify data in real-time as `normal` or `abnormal`. ğŸ“‰

---

## Machine Learning Model ğŸ§ 

### Data Collection ğŸ“Š
- **Normal Data**: Recorded at room temperature ğŸŒ¡ï¸.
- **Abnormal Data**: Recorded while blowing air on the sensor ğŸ’¨.

<div align="center">

| Data Type      | Training Split | Testing Split |
|----------------|----------------|---------------|
| Normal Data    | 80%            | 20%           |
| Abnormal Data  | 80%            | 20%           |

</div>

### Training and Testing ğŸ§‘â€ğŸ«

1. Merged normal and abnormal datasets to create `X_train` and `X_test`.
2. Tested multiple models:
   - K-Means Clustering
   - Isolation Forest
   - Random Forest (Best Performance) ğŸ†

3. **Random Forest Results**:
   - **Accuracy**: 100% on the test dataset. âœ…
   - **Evaluation Metrics**:
   - **Confusion Matrix**:
<div align="center">
  <img src="random_forest_model/confusion_matrix.png" alt="Confusion Matrix" height="350">
  <p><i>Figure 9: Confusion Matrix</i></p>
</div>

   - **Classification Report**:
<div align="center">

|              | Precision | Recall | F1-Score | Support |
|--------------|-----------|--------|----------|---------|
| **0 (normal)** | 1.00      | 1.00   | 1.00     | 9       |
| **1 (abnormal)** | 1.00      | 1.00   | 1.00     | 11      |
| **Accuracy** |           |        | 1.00     | 20      |
| **Macro Avg** | 1.00      | 1.00   | 1.00     | 20      |
| **Weighted Avg** | 1.00  | 1.00   | 1.00     | 20      |

</div>

### Model Features ğŸ”§
- Architecture ğŸ—ï¸
<div align="center">
  <img src="random_forest_model/decision_tree.png" alt="Decision Tree" height="400">
  <p><i>Figure 10: Decision Tree Architecture</i></p>
</div>

- Hyperparameters âš™ï¸
<div align="center">
  <img src="random_forest_model/hyperparameters_table.png" alt="Hyperparameters Table" height="300">
  <p><i>Figure 11: Hyperparameters Table</i></p>
</div>

- Most Important Features ğŸ”‘
<div align="center">
  <img src="random_forest_model/feature_importances.png" alt="Feature Importances" height="400">
  <p><i>Figure 12: Feature Importances</i></p>
</div>

---

ğŸš€ **Announcement:** Edge AI implementation using C/C++ is coming! 
